#!/bin/bash
SI="s"
NO="n"
VARIABLE="compilar"
##Sintetizar boot0-serial

while [ "$VARIABLE" ]; do


echo ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
echo ~~~~~~~~~~~~~ Sintetizar programa y LM32 ~~~~~~~~~~~~~~~
echo ~~~~~~~~~~~~~~~~~ Autor: Carlos Gil ~~~~~~~~~~~~~~~~~~~~
echo ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


echo ========================================================
echo !------------------------------------------------------!
echo !++++++++++++++ CREANDO LA IMAGEN imagen.ram ++++++++++!
echo !------------------------------------------------------!
echo ========================================================

cd ~/Desktop/SemestreVII/DEII/lmprofe/lm32_soc/firmware/boot0-serial
make clean
make

	echo Recompilar de nuevo? si o no
	read COMPILE
	if [ "$COMPILE" == "$SI" ]; then
		clear
	else
		break
	fi
done

	
	
	echo ========================================================
	echo !------------------------------------------------------!
	echo !++++++++++++++++++ IMAGEN CREADA +++++++++++++++++++++!
	echo !------------------------------------------------------!
	echo ========================================================
	
	
	## Sintetizar LM32
	echo ========================================================
	echo !------------------------------------------------------!
	echo !+++++++++ SINTETIZANDO EL LM32, CREANDO .bit +++++++++!
	echo !------------------------------------------------------!
	echo ========================================================
	
	cd ~/Desktop/SemestreVII/DEII/lmprofe/lm32_soc/ 
	make clean
	make 
	##make syn
	
	echo ========================================================
	echo !------------------------------------------------------!
	echo !+++++++++++++++++ LM32 SINTETIZADO +++++++++++++++++++!
	echo !------------------------------------------------------!
	echo ========================================================
	
	#Programar la FPGA
	echo ========================================================
	echo !------------------------------------------------------!
	echo !+++++++++++++++++ PROGRAMANDO FPGA +++++++++++++++++++!
	echo !------------------------------------------------------!
	echo ========================================================


	djtgcfg enum; 
	djtgcfg init -d Nexys4; 
	##djtgcfg prog  -d Nexys4 -i 0 -f ~/Desktop/SemestreVII/DEII/lmprofe/lm32_soc/system.bit 
	echo FPGA programada!!

	echo ========================================================
	echo !------------------------------------------------------!
	echo !++++++++++++++++++ FPGA PROGRAMADA +++++++++++++++++++!
	echo !------------------------------------------------------!
	echo ========================================================
	
exit 0







